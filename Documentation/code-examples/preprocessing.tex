\begin{figure}[H]
\begin{minipage}{0.48\textwidth}
\begin{sourcecode}
\begin{javacode}{2,15,27-33}
public abstract class DocumentLoader 
	extends SwingWorker<List<Document>, Void> { //1$\label{codeline:DocumentLoader-1a}$
    ... // field declarations
    private File[] files;
    ... // field declarations
    public void load(File... files) {
        this.files = files;
        execute();
    }
    
    protected List<Document> doInBackground() throws Exception {
        List<Document> result = new ArrayList<Document>();
        for (File file : files) {
            try {
                result.add(new Document(//2$\label{codeline:DocumentLoader-2a}$
                        file.getName(),
                        file.getAbsolutePath(),
                        ..., // LANGUAGE
                        ImageIO.read(file)));
            } catch (IOException ex) {
                ... // handle exception
            }
        }
        return result;
    }

    protected void done() {
        try {
            fetchResult(get());//3$\label{codeline:DocumentLoader-3a}$
        } catch (Exception ex) {
            log.warn("SwingWorker error");
        }
    }

	/* This method is implemented in the class 
	 * "Controller". The the implementation 
	 * consist of loading all images into 
	 * Juneiform
	*/
    public abstract void fetchResult(
    	List<Document> result);
}
\end{javacode}
\caption{DocumentLoader Class - Original Code}
\label{code:example-original-v1}
\end{sourcecode}
\end{minipage}\hspace{0.7cm}
\begin{minipage}{0.48\textwidth}
\begin{sourcecode}
\begin{javacode}{2,15,27-29}
public abstract class DocumentLoader 
	extends SwingWorker<List<Document>, Document> { //1$\label{codeline:DocumentLoader-1b}$
    ... // field declarations
    private File[] files;
    ... // field declarations
    public void load(File... files) {
        this.files = files;
        execute();
    }
    
    protected List<Document> doInBackground() throws Exception {
        List<Document> result = new ArrayList<Document>();
        for (File file : files) {
            try {
                publish(new Document( //2$\label{codeline:DocumentLoader-2b}$
                        file.getName(),
                        file.getAbsolutePath(),
                        ..., // LANGUAGE
                        ImageIO.read(file)));
            } catch (IOException ex) {
                ... // handle exception
            }
        }
        return result;
    }

    protected void process(List<Document> chunks){
        fetchResult(chunks); //3$\label{codeline:DocumentLoader-3b}$
    }

	/* This method is implemented in the class 
	 * "Controller". The the implementation 
	 * consist of loading all images into 
	 * Juneiform
	*/
    public abstract void fetchResult(
    	List<Document> result);
}
\end{javacode}
\caption{DocumentLoader Class - Pre-Processing}
\label{code:example-pre-processing}
\end{sourcecode}
\end{minipage}
\end{figure}