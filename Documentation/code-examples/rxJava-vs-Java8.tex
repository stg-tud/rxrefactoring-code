\begin{figure}[h]
\begin{minipage}{0.48\textwidth}
\begin{sourcecode}
\begin{javacode}{2-8,10,14}
Observable.from(productDao.getProducts())
        .filter(p ->
                p.getPrice() > 50 &&
                p.getStore().equals(STORE_A))
        .map(p -> new Product(
                p.getId(),
                p.getPrice() * 1.10,
                STORE_B))
        .subscribeOn(Schedulers.computation())
        .doOnNext(p -> productDao.save(p))
        .doOnError(t -> handleError(t))
        .observeOn(Schedulers.uiThread()) // only as example: this scheduler doesn't exist
        .doOnCompleted(() -> updateUI())
        .subscribe();
\end{javacode}
\caption{RxJava (Products Example)}
\label{code:rxJava-compared}
\end{sourcecode}
\end{minipage}\hspace{0.7cm}
\begin{minipage}{0.48\textwidth}
\begin{sourcecode}
\begin{javacode}{2-9}
productDao.getProducts().stream()
        .filter(p ->
                p.getPrice() > 50 &&
                p.getStore().equals(STORE_A))
        .map(p -> new Product(
                p.getId(),
                p.getPrice() * 1.10,
                STORE_B))
        .forEach(p -> productDao.save(p));
\end{javacode}
\caption{Java 8 (Products Example)}
\label{code:java8-compared}
\end{sourcecode}
\end{minipage}
\end{figure}